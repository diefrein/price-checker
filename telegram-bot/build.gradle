plugins {
    id "java"
    id "application"
    id "checkstyle"
}

group = 'ru.diefrein.pricechecker'
version = '1.0.2'

repositories {
    mavenCentral()
}

dependencies {
    implementation project(path: ':checker-common')

    implementation "org.telegram:telegrambots:$telegrambotsVersion"

    implementation "org.apache.kafka:kafka-clients:$kafkaVersion"

    implementation "org.postgresql:postgresql:$postgresVersion"
    implementation "com.zaxxer:HikariCP:$hikaryVersion"

    implementation "com.fasterxml.jackson.core:jackson-databind:$jacksonVersion"
    implementation "com.fasterxml.jackson.datatype:jackson-datatype-jsr310:$jacksonVersion"

    testImplementation platform("org.junit:junit-bom:$junitVersion")
    testImplementation 'org.junit.jupiter:junit-jupiter'
}

jar {
    manifest {
        attributes(
                "Main-Class": "ru.diefrein.pricechecker.bot.Application"
        )
    }
}

application {
    mainClass = "ru.diefrein.pricechecker.bot.Application"
}

test {
    useJUnitPlatform()
}

checkstyle {
    configFile = file("${rootDir}/config/checkstyle/checkstyle.xml")
    ignoreFailures = false
    checkstyleTest.enabled = false
}